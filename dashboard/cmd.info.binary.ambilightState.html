<div class="cmd cmd-widget #history# hyperionNG" data-type="info" data-subtype="binary" data-cmd_id="#id#"
	data-cmd_uid="#uid#" data-version="#version#">
	<link rel="stylesheet" href="plugins/hyperionNG/core/template/dashboard/css/ambilightState.css">
	<div class="title #hide_name#">
		<div class="cmdName">#name_display#</div>
	</div>
	<div class="content">
		<div class="background">
			<span></span>
			<span></span>
			<div class="tv"></div>
			<div class="tv2"></div>
			<div class="tv3"></div>
		</div>
	</div>
	<div class="timeCmd label label-default #history#" data-type="info"></div>
	<script>
		jeedom.cmd.addUpdateFunction('#id#', function (_options) {
			if (is_object(cmd = document.querySelector('.cmd[data-cmd_uid="#uid#"]'))) {
				cmd.setAttribute('title', '{{Date de valeur}}: ' + _options.valueDate + '<br>{{Date de collecte}}: ' + _options.collectDate)

				// >= 4.4.0
				// if ('#_time_widget_#' == '1' || '#time#' == 'duration' || '#time#' == 'date') {
				// 	jeedom.cmd.displayDuration(_options.valueDate, cmd.querySelector('.timeCmd'), '#time#')
				// }

				// < 4.4.0
				let cmd2 = $('.cmd[data-cmd_id=#id#]')
				if ('#time#' == 'duration' || '#time#' == 'date') {
					jeedom.cmd.displayDuration(_options.valueDate, cmd2.find('.timeCmd'), '#time#')
				} else {
					cmd2.find('.timeCmd').remove()
				}

				if (_options.display_value == 1) {
					cmd.querySelector('.background').setAttribute('style', 'background: conic-gradient(red, yellow, lime, aqua, blue, magenta, red); animation: hyperionNGRotate 1.5s linear infinite')
				} else {
					cmd.querySelector('.background').setAttribute('style', 'background: none; animation: none')
				}
			}
		})
		jeedom.cmd.refreshValue([{ cmd_id: '#id#', value: '#value#', display_value: '#state#', valueDate: '#valueDate#', collectDate: '#collectDate#', alertLevel: '#alertLevel#', unit: '#unite#' }])
	</script>
</div>